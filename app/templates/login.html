{% extends "base.html" %}

{% block extra_css %}
  <link rel="stylesheet" href="{{url_for('static', filename='css/global/login.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
{% endblock %}

{% block content %}
  <div class="login-card">
    <h2><i class="fas fa-sign-in-alt"></i> Iniciar Sesión</h2>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% set allowed_login_messages = [
            'No existe un usuario registrado con ese correo.',
            'Contraseña incorrecta.',
            'Tu número de ficha se encuentra suspendido. No puedes acceder al sistema.',
            'Tu cuenta aún está pendiente de validación. Contacta al administrador.',
            'La contraseña actual es incorrecta.'
        ] %}
        {% for category, message in messages %}
          {% if message in allowed_login_messages and category in ['danger', 'warning', 'info'] %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
          {% endif %}
        {% endfor %}
      {% endif %}
    {% endwith %}
    <form method="POST">
      <div class="input-group">
        <span class="input-icon"><i class="fas fa-envelope"></i></span>
        <input type="email" id="email" name="email" placeholder="Correo electrónico" required>
      </div>
      <div class="input-group">
        <span class="input-icon"><i class="fas fa-lock"></i></span>
        <input type="password" id="password" name="password" placeholder="Contraseña" required>
      </div>
      <button type="submit" class="btn btn-primary">Entrar <i class="fas fa-arrow-right"></i></button>
    </form>
    <p>¿No tienes cuenta? <a href="{{ url_for('main.register') }}">Regístrate aquí</a></p>
  </div>
{% endblock %}
