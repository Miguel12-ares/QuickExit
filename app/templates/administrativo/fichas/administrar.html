{% extends "base.html" %}

{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/administrativo/fichas/administrar.css') }}">
{% endblock %}

{% block content %}
<div class="fichas-panel">
  <h2>Administrar Fichas</h2>
  <table class="fichas-table">
    <thead>
      <tr>
        <th>ID Ficha</th>
        <th>Nombre</th>
        <th>Instructor Líder</th>
        <th>Fecha de Creación</th>
        <th>Estado</th>
        <th>Observaciones</th>
      </tr>
    </thead>
    <tbody>
      {% for ficha in fichas %}
      <tr>
        <td>{{ ficha.id_ficha }}</td>
        <td>{{ ficha.nombre }}</td>
        <td>{{ ficha.instructor_lider.nombre if ficha.instructor_lider else 'Sin asignar' }}</td>
        <td>{{ ficha.fecha_creacion.strftime('%Y-%m-%d') }}</td>
        <td>
          <form method="POST" class="estado-form">
            <input type="hidden" name="id_ficha" value="{{ ficha.id_ficha }}">
            <select name="nuevo_estado" class="estado-select">
              <option value="activa" {% if ficha.habilitada %}selected{% endif %}>Activa</option>
              <option value="deshabilitada" {% if not ficha.habilitada %}selected{% endif %}>Deshabilitada</option>
            </select>
            <button type="submit" class="btn-estado">Guardar</button>
          </form>
        </td>
        <td>{{ ficha.descripcion or '-' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
