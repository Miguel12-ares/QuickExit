{% extends "base.html" %}

{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/instructor/instructor.css') }}">
{% endblock %}

{% block content %}
<div class="instructor-panel">
  <h2>Validar Aprendices</h2>
  <div class="instructor-card" style="max-width:900px;margin:auto;">
    <h3 style="color:#2e7d32;">Aprendices Pendientes de Validación</h3>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    {% if aprendices %}
      <div class="table-responsive">
        <table class="instructor-table">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Documento</th>
              <th>Email</th>
              <th>Ficha</th>
              <th>Fecha de Registro</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            {% for aprendiz in aprendices %}
            <tr>
              <td>{{ aprendiz.nombre }}</td>
              <td>{{ aprendiz.documento }}</td>
              <td>{{ aprendiz.email }}</td>
              <td>{{ aprendiz.ficha.nombre }}</td>
              <td>{{ aprendiz.fecha_registro.strftime('%d/%m/%Y %H:%M') }}</td>
              <td>
                <form action="{{ url_for('main.validar_aprendiz', id_usuario=aprendiz.id_usuario, accion='aprobar') }}" method="POST" style="display:inline-block;">
                  <button type="submit" class="btn-aprobar" onclick="return confirm('¿Está seguro de aprobar a este aprendiz?')">Aprobar</button>
                </form>
                <form action="{{ url_for('main.validar_aprendiz', id_usuario=aprendiz.id_usuario, accion='rechazar') }}" method="POST" style="display:inline-block;">
                  <button type="submit" class="btn-rechazar" onclick="return confirm('¿Está seguro de rechazar a este aprendiz? Esta acción no se puede deshacer.')">Rechazar</button>
                </form>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div style="text-align:center; color:#888; margin-top:24px; font-size:1.1rem;">No hay aprendices pendientes de validación en tus fichas.</div>
    {% endif %}
  </div>
</div>
{% endblock %} 