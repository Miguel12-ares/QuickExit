{% extends "base.html" %}

{% block extra_css %}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/aprendiz/nueva_solicitud.css') }}">
{% endblock %}

{% block content %}
<div class="register-container">
    <h2><i class="fas fa-plus-circle"></i> Nueva Solicitud de Salida</h2>
    
    {% if not tipos_salida or tipos_salida|length == 0 %}
    <div class="alert alert-warning">
        <i class="fas fa-exclamation-triangle"></i>
        No hay tipos de salida configurados. Contacte al administrador.
    </div>
    {% endif %}
    
    <form action="{{ url_for('main.aprendiz_nueva_solicitud') }}" method="post" class="register-form">
        <div class="input-group">
            <span class="input-icon"><i class="fas fa-tag"></i></span>
            {% if tipos_salida and tipos_salida|length > 0 %}
            <select name="tipo_salida" id="tipo_salida" required>
                <option value="">Seleccione un tipo</option>
                {% for tipo in tipos_salida %}
                <option value="{{ tipo.id_tipo }}">{{ tipo.nombre }}</option>
                {% endfor %}
            </select>
            {% else %}
            <select disabled>
                <option>No hay tipos configurados</option>
            </select>
            {% endif %}
        </div>
        
        <div class="input-group">
            <span class="input-icon"><i class="fas fa-clock"></i></span>
            <input type="time" name="hora_salida" id="hora_salida" required>
        </div>
        
        <div class="input-group">
            <span class="input-icon"><i class="fas fa-redo"></i></span>
            <input type="time" name="hora_reingreso" id="hora_reingreso" placeholder="Hora de reingreso (opcional)">
        </div>
        
        <div class="input-group">
            <span class="input-icon"><i class="fas fa-list-ul"></i></span>
            <select name="motivo_predeterminado" id="motivo_predeterminado" required>
                <option value="">Seleccione un motivo</option>
                <option value="Cita/Incapacidad Médica">Cita/Incapacidad Médica</option>
                <option value="Diligencias Electorales/Gubernamentales">Diligencias Electorales/Gubernamentales</option>
                <option value="Trámites Etapa Productiva">Trámites Etapa Productiva</option>
                <option value="Requerimientos Laborales">Requerimientos Laborales</option>
                <option value="Casos Fortuitos/Fuerza Mayor">Casos Fortuitos/Fuerza Mayor</option>
                <option value="Representación SENA (Académica/Cultural/Deportiva)">Representación SENA (Académica/Cultural/Deportiva)</option>
                <option value="Diligencias Judiciales">Diligencias Judiciales</option>
                <option value="Otro">Otro</option>
            </select>
        </div>
        
        <div class="input-group textarea-group" id="motivo_especificacion_group" style="display: none;">
            <span class="input-icon"><i class="fas fa-pencil-alt"></i></span>
            <textarea name="motivo_especificacion" id="motivo_especificacion" rows="4" placeholder="Describa detalladamente el motivo de su solicitud..."></textarea>
        </div>
        
        <button type="submit" class="btn btn-primary">Enviar Solicitud <i class="fas fa-paper-plane"></i></button>
    </form>
    
    <p><a href="{{ url_for('main.aprendiz_dashboard') }}"><i class="fas fa-arrow-left"></i> Volver al Dashboard</a></p>
</div>
{% endblock %}

{% block extra_js %}
  <script src="{{ url_for('static', filename='js/aprendiz/nueva_solicitud.js') }}"></script>
{% endblock %}
